!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GameEngine=e():t.GameEngine=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist",n(n.s=14)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(8),i=n(6);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(9);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(10);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},i(e,n,o||e)}t.exports=i},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(11),i=n(12),o=n(13);t.exports=function(t){return r(t)||i(t)||o()}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=n(3),u=n.n(s),l=n(2),c=n.n(l),h=n(6),f=n.n(h),d=n(4),y=n.n(d),v=n(5),p=n.n(v),g=function(){function t(){i()(this,t),this.handlers={}}return a()(t,[{key:"on",value:function(){this.addEventListener.apply(this,arguments)}},{key:"off",value:function(){this.removeEventListener.apply(this,arguments)}},{key:"addEventListener",value:function(t,e){this.handlers.hasOwnProperty(t)||(this.handlers[t]=[]),this.handlers[t].push(e)}},{key:"removeEventListener",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"emit",value:function(t){if(this.handlers.hasOwnProperty(t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var s,u=this.handlers[t][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;l.apply(void 0,n)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}}]),t}(),m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),(t=u()(this,c()(e).call(this))).uid=GameEngine.Util.generateUid(),t.x=n.x||0,t.y=n.y||0,t.width=n.width||0,t.height=n.height||0,t.rotation=n.rotation||0,t.anchorX=n.anchorX||0,t.anchorY=n.anchorY||0,t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1,t.parent=null,t.visible=!0,void 0!==n.scale&&t.setScale(n.scale),t}return y()(e,t),a()(e,[{key:"setScale",value:function(t){this.scaleX=t,this.scaleY=t}},{key:"setParent",value:function(t){this.parent&&this.parent.remove&&this.parent.remove(this),t&&t.add&&t.add(this),this.parent=t}},{key:"draw",value:function(t){this.visible&&t()}},{key:"scene",get:function(){return Util.getScene(this)}},{key:"game",get:function(){return this.scene.parent}},{key:"absoluteX",get:function(){return this.x-this.anchorX*this.width*this.scaleX},set:function(t){return this.x=t+this.anchorX*this.width*this.scaleX,t}},{key:"absoluteY",get:function(){return this.y-this.anchorY*this.height*this.scaleY},set:function(t){return this.y=t+this.anchorY*this.height*this.scaleY,t}},{key:"centerX",get:function(){return this.absoluteX+this.width/2*this.scaleX},set:function(t){return this.absoluteX=t-this.width/2}},{key:"centerY",get:function(){return this.absoluteY+this.height/2*this.scaleY},set:function(t){return this.absoluteY=t-this.height/2}}]),e}(g),b=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),(t=u()(this,c()(e).call(this,n))).displayObjects=[],t}return y()(e,t),a()(e,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];this.displayObjects.includes(o)||(this.displayObjects.push(o),o.setParent(this))}}},{key:"tick",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.displayObjects[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.tick&&a.tick(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"remove",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(this.displayObjects.includes(o)){var a=this.displayObjects.indexOf(o);this.displayObjects.splice(a,1),o.setParent(null)}}}},{key:"draw",value:function(t,n){var r=this;p()(c()(e.prototype),"draw",this).call(this,(function(){n.save(),n.translate(r.x,r.y),n.rotate(-r.rotation),n.scale(r.scaleX,r.scaleY);var e=!0,i=!1,o=void 0;try{for(var a,s=r.displayObjects[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){a.value.draw(t,n)}}catch(t){i=!0,o=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw o}}n.restore()}))}}]),e}(m),w=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),(t=u()(this,c()(e).call(this))).autoStart=n.autoStart||!1,t.name=n.name||"",t.status="waiting",t.stage=t.displayObjects,n.loading&&(t.loading=n.loading.bind(f()(t))),n.init&&(t.init=n.init.bind(f()(t))),n.update&&(t.update=n.update.bind(f()(t))),n.beforeDestroy&&(t.beforeDestroy=n.beforeDestroy.bind(f()(t))),t}return y()(e,t),a()(e,[{key:"loading",value:function(){}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"beforeDestroy",value:function(){}}]),e}(b),x={},k=[],S={delay:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return x[t]?!(x[t]+e>Date.now())&&(x[t]=Date.now(),!0):(x[t]=Date.now(),!0)},generateUid:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=j();k.includes(t);)t=j();return t},isInside:function(t,e){return e.x<=t.x&&t.x<=e.x+e.width&&e.y<=t.y&&t.y<=e.y+e.height},removeElements:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(t.includes(a)){var s=t.indexOf(a);t.splice(s,1)}}},getScene:function(t){return!t||t instanceof w?t:S.getScene(t.parent)},tween:function(t){var e=t.target,n=t.duration,r=t.processer;if(!e)throw new Error("Tween without target object.");var i=Date.now(),o={},a=!1,s=function(){var t=Math.min((Date.now()-i)/n,1);r(e,t,o),t>=1&&(a=!0,o=null,e=null,r=null,s=null,clearInterval(u))};s();var u=setInterval(s);return function(){a||(a=!0,o=null,e=null,r=null,s=null,clearInterval(u))}},getRandomFrom:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[Math.floor(Math.random()*e.length)]}},O="qwerrtyahsgdfvzbxncmjiuk1239875039487";function j(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e="";e.length<t;)e+=O[Math.floor(Math.random()*O.length)];return e}var P=S,A=function(){function t(){i()(this,t),this.objects=new Set}return a()(t,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];this.objects.add(o)}}},{key:"remove",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];this.objects.delete(o)}}},{key:"processing",value:function(){for(var t=Array.from(this.objects),e=0;e<t.length-1;e++)for(var n=t[e],r=n.bodyRect,i=n.tops,o=n.velocity.x,a=n.velocity.y,s=e+1;s<t.length;s++){var u=t[s];if(!n.static||!u.static){var l=u.bodyRect,c=u.tops,h=u.velocity.x,f=u.velocity.y,d=!1,y=!0,v=!1,p=void 0;try{for(var g,m=i[Symbol.iterator]();!(y=(g=m.next()).done);y=!0){var b=g.value;if(d=P.isInside({x:b[0]+o,y:b[1]+a},{x:l.x+h,y:l.y+f,width:l.width,height:l.height}))break}}catch(t){v=!0,p=t}finally{try{y||null==m.return||m.return()}finally{if(v)throw p}}if(!1===d){var w=!0,x=!1,k=void 0;try{for(var S,O=c[Symbol.iterator]();!(w=(S=O.next()).done);w=!0){var j=S.value;if(d=P.isInside({x:j[0]+h,y:j[1]+f},{x:r.x+o,y:r.y+a,width:r.width,height:r.height}))break}}catch(t){x=!0,k=t}finally{try{w||null==O.return||O.return()}finally{if(x)throw k}}}d&&(n.emit("collision",u,n),u.emit("collision",n,u))}}}}]),t}(),D=n(7),X=n.n(D),Y=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,e),n=u()(this,c()(e).call(this,r));var o=r.frame||{},a=r.velocity||{};return n.texture=t,n.keysDefault=r.keysDefault||[],n.frames=[],n.frameNumber=0,n.frameDelay=0,n.animations={},n.animation="",n.animationPaused=!1,n.velocity={x:a.x||0,y:a.y||0},n.frame={x:o.x||0,y:o.y||0,width:o.width||t?t.width:0,height:o.height||t?t.height:0},void 0===r.width&&(n.width=n.frame.width),void 0===r.height&&(n.height=n.frame.height),n}return y()(e,t),a()(e,[{key:"setFramesCollection",value:function(t){this.frames=t}},{key:"setAnimationsCollection",value:function(t){this.animations=t}},{key:"startAnimation",value:function(t){if(!this.animations.hasOwnProperty(t))return!1;var e=this.animations[t],n=e.duration,r=void 0===n?1/0:n,i=e.keys;this.animation=t,this.frameDelay=r/i.length,this.setFrameByKeys.apply(this,X()(i[0]))}},{key:"pauseAnimation",value:function(){this.animationPaused=!0}},{key:"resumeAnimation",value:function(){this.animationPaused=!1}},{key:"setFrameByKeys",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.getFrameByKeys.apply(this,e.concat(X()(this.keysDefault)));if(!r)return!1;this.frame.x=r.x,this.frame.y=r.y,this.frame.width=r.width,this.frame.height=r.height,this.width=this.frame.width,this.height=this.frame.height}},{key:"getFrameByKeys",value:function(){for(var t=!1,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var s,u=this.frames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;t=!0;var c=!0,h=!1,f=void 0;try{for(var d,y=n[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var v=d.value;if(!l.keys.includes(v)){t=!1;break}}}catch(t){h=!0,f=t}finally{try{c||null==y.return||y.return()}finally{if(h)throw f}}if(t)return l}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}},{key:"tick",value:function(t){if(!this.animationPaused&&this.animation&&P.delay(this.animation+this.uid,this.frameDelay)){var e=this.animations[this.animation].keys;this.frameNumber=(this.frameNumber+1)%e.length,this.setFrameByKeys.apply(this,X()(e[this.frameNumber])),this.emit("frameChange",this)}this.x+=this.velocity.x,this.y+=this.velocity.y}},{key:"draw",value:function(t,n){var r=this;p()(c()(e.prototype),"draw",this).call(this,(function(){n.save(),n.translate(r.x,r.y),n.rotate(-r.rotation),r.texture&&n.drawImage(r.texture,r.frame.x,r.frame.y,r.frame.width,r.frame.height,r.absoluteX-r.x,r.absoluteY-r.y,r.width*r.scaleX,r.height*r.scaleY),n.restore()}))}}]),e}(m),E=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(this,e),n=u()(this,c()(e).call(this,t,r));var o=r.body||{};return n.debug=r.debug||!1,n.static=r.static||!1,n.body={},n.body.x=o.x||0,n.body.y=o.y||0,n.body.width=o.width||1,n.body.height=o.height||1,n}return y()(e,t),a()(e,[{key:"isInside",value:function(t,e){return P.isInside({x:t,y:e},this.bodyRect)}},{key:"draw",value:function(t,e){if(this.visible){if(e.save(),e.translate(this.x,this.y),e.rotate(-this.rotation),e.drawImage(this.texture,this.frame.x,this.frame.y,this.frame.width,this.frame.height,this.absoluteX-this.x,this.absoluteY-this.y,this.width*this.scaleX,this.height*this.scaleY),this.debug){var n=this.bodyRect,r=n.x,i=n.y,o=n.width,a=n.height;e.fillStyle="rgba(255, 0, 0, 0.2)",e.beginPath(),e.rect(r-this.x,i-this.y,o,a),e.fill(),e.fillStyle="rgb(0, 255, 0)",e.beginPath(),e.arc(0,0,3,0,2*Math.PI),e.fill()}e.restore()}}},{key:"bodyRect",get:function(){return{x:this.absoluteX+this.width*this.scaleX*this.body.x,y:this.absoluteY+this.height*this.scaleY*this.body.y,width:this.width*this.scaleX*this.body.width,height:this.height*this.scaleY*this.body.height}}},{key:"tops",get:function(){var t=this.bodyRect,e=t.x,n=t.y,r=t.width,i=t.height;return[[e,n],[e+r,n],[e,n+i],[e+r,n+i]]}}]),e}(Y),I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.background=e.background||"black",this.canvas.width=e.width||50,this.canvas.height=e.height||50}return a()(t,[{key:"clear",value:function(){this.context.fillStyle=this.background,this.context.beginPath(),this.context.rect(0,0,this.canvas.width,this.canvas.height),this.context.fill()}}]),t}(),R=function(){function t(){i()(this,t),this.loadOrder={images:[],jsons:[],sounds:[]},this.resources={images:{},jsons:{},sounds:{}}}return a()(t,[{key:"addImage",value:function(t,e){this.loadOrder.images.push({name:t,src:e})}},{key:"addJson",value:function(t,e){this.loadOrder.jsons.push({name:t,address:e})}},{key:"addSound",value:function(t,e){this.loadOrder.sounds.push({name:t,src:e})}},{key:"getImage",value:function(t){return this.resources.images[t]}},{key:"getJson",value:function(t){return this.resources.jsons[t]}},{key:"getSound",value:function(t){return this.resources.sounds[t]}},{key:"load",value:function(e){var n=this,r=[],i=!0,o=!1,a=void 0;try{for(var s,u=function(){var e=s.value,i=e.name,o=e.src,a=t.loadImage(o).then((function(t){if(n.resources.images[i]=t,n.loadOrder.images.includes(e)){var r=n.loadOrder.images.indexOf(e);n.loadOrder.images.splice(r,1)}}));r.push(a)},l=this.loadOrder.images[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}var c=!0,h=!1,f=void 0;try{for(var d,y=function(){var e=d.value,i=e.name,o=e.address,a=t.loadJson(o).then((function(t){if(n.resources.jsons[i]=t,n.loadOrder.jsons.includes(e)){var r=n.loadOrder.jsons.indexOf(e);n.loadOrder.jsons.splice(r,1)}}));r.push(a)},v=this.loadOrder.jsons[Symbol.iterator]();!(c=(d=v.next()).done);c=!0)y()}catch(t){h=!0,f=t}finally{try{c||null==v.return||v.return()}finally{if(h)throw f}}var p=!0,g=!1,m=void 0;try{for(var b,w=function(){var e=b.value,i=e.name,o=e.src,a=t.loadSound(o).then((function(t){if(n.resources.sounds[i]=t,n.loadOrder.sounds.includes(e)){var r=n.loadOrder.sounds.indexOf(e);n.loadOrder.sounds.splice(r,1)}}));r.push(a)},x=this.loadOrder.sounds[Symbol.iterator]();!(p=(b=x.next()).done);p=!0)w()}catch(t){g=!0,m=t}finally{try{p||null==x.return||x.return()}finally{if(g)throw m}}Promise.all(r).then(e)}}],[{key:"loadImage",value:function(t){return new Promise((function(e,n){try{var r=new Image;r.onload=function(){return e(r)},r.src=t}catch(t){n(t)}}))}},{key:"loadJson",value:function(t){return new Promise((function(e,n){fetch(t).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))}},{key:"loadSound",value:function(t){return new Promise((function(e,n){try{var r=new Audio;r.addEventListener("canplaythrough",(function(){return e(r)})),r.src=t}catch(t){n(t)}}))}}]),t}(),L=function t(){i()(this,t);var e=this;this.arrowUp=!1,this.arrowDown=!1,this.arrowLeft=!1,this.arrowRight=!1,this.space=!1,document.body.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":e.arrowUp=!0;break;case"ArrowDown":e.arrowDown=!0;break;case"ArrowRight":e.arrowRight=!0;break;case"ArrowLeft":e.arrowLeft=!0;break;case"Space":e.space=!0}})),document.body.addEventListener("keyup",(function(t){switch(t.code){case"ArrowUp":e.arrowUp=!1;break;case"ArrowDown":e.arrowDown=!1;break;case"ArrowRight":e.arrowRight=!1;break;case"ArrowLeft":e.arrowLeft=!1;break;case"Space":e.space=!1}}))},_=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),this.renderer=new I(n),this.loader=new R,this.scenesCollection=new b,this.keyboard=new L,n.scenes&&this.addScene.apply(this,X()(n.scenes)),n.el&&n.el.appendChild&&n.el.appendChild(this.renderer.canvas);var r=this.scenes.filter((function(t){return t.autoStart})),o=!0,a=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.status="loading",c.loading(this.loader)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}this.loader.load((function(){var t=!0,e=!1,n=void 0;try{for(var i,o=r[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.status="init",a.init()}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}var s=!0,u=!1,l=void 0;try{for(var c,h=r[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){c.value.status="started"}}catch(t){u=!0,l=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}})),requestAnimationFrame((function(t){return e.tick(t)}))}return a()(t,[{key:"addScene",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this.scenesCollection).add.apply(t,n);for(var i=0,o=n;i<o.length;i++){var a=o[i];a.parent=this}}},{key:"tick",value:function(t){var e=this,n=this.scenes.filter((function(t){return"started"===t.status})),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.update(t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var u=!0,l=!1,c=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){h.value.tick(t)}}catch(t){l=!0,c=t}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}this.renderer.clear();var d=!0,y=!1,v=void 0;try{for(var p,g=n[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){p.value.draw(this.renderer.canvas,this.renderer.context)}}catch(t){y=!0,v=t}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}requestAnimationFrame((function(t){return e.tick(t)}))}},{key:"getScene",value:function(t){if(t instanceof w&&this.scenes.includes(t))return t;if("string"==typeof t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.scenes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.name===t)return a}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}},{key:"startScene",value:function(t){var e=this.getScene(t);return!!e&&(e.status="loading",e.loading(this.loader),this.loader.load((function(){e.status="init",e.init(),e.status="started"})),!0)}},{key:"finishScene",value:function(t){var e=this.getScene(t);if(!e)return!1;e.status="finished",this.scenesCollection.remove(e),e.beforeDestroy()}},{key:"scenes",get:function(){return this.scenesCollection.displayObjects}}]),t}(),C=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),(t=u()(this,c()(e).call(this,n))).color=n.color||"red",t.x1=n.x1||0,t.y1=n.y1||0,t.x2=n.x2||0,t.y2=n.y2||0,t}return y()(e,t),a()(e,[{key:"draw",value:function(t,n){var r=this;p()(c()(e.prototype),"draw",this).call(this,(function(){n.strokeStyle=r.color,n.lineWidth=1,n.beginPath(),n.moveTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.stroke()}))}}]),e}(m),M=function t(){i()(this,t)},U=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),(t=u()(this,c()(e).call(this,n))).color=n.color||"red",t}return y()(e,t),a()(e,[{key:"draw",value:function(t,n){var r=this;p()(c()(e.prototype),"draw",this).call(this,(function(){n.fillStyle=r.color,n.beginPath(),n.arc(r.x,r.y,3,0,2*Math.PI),n.fill()}))}}]),e}(m);n.d(e,"ArcadePhysics",(function(){return A})),n.d(e,"Body",(function(){return E})),n.d(e,"Container",(function(){return b})),n.d(e,"DisplayObject",(function(){return m})),n.d(e,"EventEmitter",(function(){return g})),n.d(e,"Game",(function(){return _})),n.d(e,"Keyboard",(function(){return L})),n.d(e,"Line",(function(){return C})),n.d(e,"Loader",(function(){return R})),n.d(e,"Mouse",(function(){return M})),n.d(e,"Point",(function(){return U})),n.d(e,"Renderer",(function(){return I})),n.d(e,"Scene",(function(){return w})),n.d(e,"Sprite",(function(){return Y})),n.d(e,"Util",(function(){return P})),Object.assign(_,{ArcadePhysics:A,Body:E,Container:b,DisplayObject:m,EventEmitter:g,Game:_,Keyboard:L,Line:C,Loader:R,Mouse:M,Point:U,Renderer:I,Scene:w,Sprite:Y,Util:P});e.default=_}])}));